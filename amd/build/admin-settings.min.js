define("tiny_htmlblock/admin-settings",["exports"],(function(_exports){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0;let rowcount=0;const moveRow=(row,dir)=>{"up"===dir?(row.parentNode.insertBefore(row,row.previousElementSibling),fixButtons(row.nextElementSibling)):(row.parentNode.insertBefore(row.nextElementSibling,row),fixButtons(row.previousElementSibling)),fixButtons(row)},handleRow=event=>{event.preventDefault();const row=event.target.parentNode.parentNode.parentNode.parentNode;event.target.classList.contains("fa-trash")?(row=>{row.remove(),fixButtons(document.querySelector(".row.htmlblock"))})(row):event.target.classList.contains("fa-plus")?(row=>{const newRow=row.cloneNode(!0),parts=newRow.querySelector("input").getAttribute("name").split("_");rowcount++;const re=new RegExp("_"+parts[parts.length-1]+"$");newRow.querySelectorAll("input, textarea").forEach((input=>{["name","id","value"].forEach((attr=>{if("value"===attr)return void(input.value="");let content=input.getAttribute(attr).replace(re,"_"+rowcount.toString());input.setAttribute(attr,content)}))})),row.parentNode.insertBefore(newRow,row.nextSibling),fixButtons(row),fixButtons(newRow),newRow.querySelectorAll("a").forEach((a=>{a.addEventListener("click",(function(e){handleRow(e)}))}))})(row):event.target.classList.contains("fa-arrow-up")?moveRow(row,"up"):event.target.classList.contains("fa-arrow-down")&&moveRow(row,"down")},fixButtons=row=>{const rows=document.querySelectorAll(".row.htmlblock");let i=0;for(;i<rows.length&&rows[i]!==row;i++);row.querySelectorAll("a > i.fa").forEach((e=>{e.classList.contains("fa-arrow-down")?i<rows.length-1?e.parentNode.classList.remove("hidden"):e.parentNode.classList.add("hidden"):e.classList.contains("fa-arrow-up")?i>0?e.parentNode.classList.remove("hidden"):e.parentNode.classList.add("hidden"):e.classList.contains("fa-plus")?i===rows.length-1?e.parentNode.classList.remove("hidden"):e.parentNode.classList.add("hidden"):e.classList.contains("fa-trash")&&(i===rows.length-1?e.parentNode.classList.add("hidden"):e.parentNode.classList.remove("hidden"))}))};_exports.init=name=>{const root=document.querySelector("."+name);if(!root)return;const buttons=root.getElementsByTagName("a");for(let i=0;i<buttons.length;i++)buttons.item(i).addEventListener("click",(function(e){handleRow(e)}));rowcount=document.querySelectorAll(".row.htmlblock").length,document.head.appendChild(document.createElement("style")).textContent="\n    .row.htmlblock {\n      padding-bottom: 0.5rem;\n    }\n    .row.htmlblock:nth-of-type(2n+1) {\n      border-top: 1px solid #dee2e6;\n      border-bottom: 1px solid #dee2e6;\n      background-color: rgba(0,0,0,.03);\n    }\n  "}}));

//# sourceMappingURL=admin-settings.min.js.map